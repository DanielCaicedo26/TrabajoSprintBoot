const _0x2e687b=_0x4b4d;(function(_0xd79150,_0x2c9cb5){const _0x209abe=_0x4b4d,_0x5a8460=_0xd79150();while(!![]){try{const _0x3667b3=-parseInt(_0x209abe(0xb1))/0x1*(parseInt(_0x209abe(0xb4))/0x2)+-parseInt(_0x209abe(0x8a))/0x3*(parseInt(_0x209abe(0x88))/0x4)+parseInt(_0x209abe(0xb8))/0x5+parseInt(_0x209abe(0xdf))/0x6*(parseInt(_0x209abe(0xa7))/0x7)+-parseInt(_0x209abe(0xbc))/0x8+-parseInt(_0x209abe(0x8d))/0x9*(parseInt(_0x209abe(0xca))/0xa)+parseInt(_0x209abe(0xd7))/0xb;if(_0x3667b3===_0x2c9cb5)break;else _0x5a8460['push'](_0x5a8460['shift']());}catch(_0x39e7a5){_0x5a8460['push'](_0x5a8460['shift']());}}}(_0x15b5,0xae16c));const API_BASE='http://localhost:8080';document[_0x2e687b(0x96)](_0x2e687b(0xce),function(){const _0x4303ae=_0x2e687b,_0x527396=document[_0x4303ae(0xc5)](_0x4303ae(0xa0)),_0x50a46d=document[_0x4303ae(0xc5)](_0x4303ae(0xd0)),_0x173e40=document[_0x4303ae(0xc5)]('agregar-producto'),_0x386122=document[_0x4303ae(0xc5)](_0x4303ae(0xcf)),_0x3ff764=document[_0x4303ae(0xc5)](_0x4303ae(0xa2)),_0x4acb01=document[_0x4303ae(0xc5)](_0x4303ae(0x89)),_0x33616e=document[_0x4303ae(0xc5)](_0x4303ae(0x98));let _0x109c30=[],_0x33d6c3=0x0;function _0x3789f7(){const _0x3bedeb=_0x4303ae;fetch(API_BASE+_0x3bedeb(0x8f))[_0x3bedeb(0xaf)](_0x54865a=>_0x54865a['json']())['then'](_0x5eb729=>{const _0x477f4c=_0x3bedeb;_0x527396[_0x477f4c(0xd5)]='';if(_0x5eb729[_0x477f4c(0xae)]===0x0){const _0x4709c8=document[_0x477f4c(0xb0)]('li');_0x4709c8['className']='list-group-item\x20bg-dark\x20text-white',_0x4709c8[_0x477f4c(0xa6)]=_0x477f4c(0xbb),_0x527396[_0x477f4c(0x9c)](_0x4709c8);}else _0x5eb729[_0x477f4c(0x90)](_0x2c6eb6=>{const _0x58c02f=_0x477f4c,_0x1edd5e=document[_0x58c02f(0xb0)]('li');_0x1edd5e[_0x58c02f(0xba)]='list-group-item\x20bg-dark\x20text-white',_0x1edd5e[_0x58c02f(0xd5)]=_0x58c02f(0xde)+(_0x2c6eb6['id']||_0x58c02f(0xc9))+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Venta:\x20'+(_0x2c6eb6[_0x58c02f(0xbe)]&&_0x2c6eb6[_0x58c02f(0xbe)]['id']?_0x2c6eb6[_0x58c02f(0xbe)]['id']:'N/A')+_0x58c02f(0x8b)+(_0x2c6eb6[_0x58c02f(0x82)]&&_0x2c6eb6[_0x58c02f(0x82)]['nombre']?_0x2c6eb6['producto'][_0x58c02f(0x9f)]:_0x58c02f(0xc9))+_0x58c02f(0xc1)+(_0x2c6eb6[_0x58c02f(0xd2)]||0x0)+_0x58c02f(0xdb)+(_0x2c6eb6[_0x58c02f(0xd1)]||0x0)['toFixed'](0x2)+_0x58c02f(0xdd)+(_0x2c6eb6[_0x58c02f(0xbe)]===null?'<span\x20class=\x22text-danger\x22>(Venta\x20no\x20encontrada)</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2c6eb6[_0x58c02f(0x82)]===null?_0x58c02f(0x9a):'')+_0x58c02f(0xc8),_0x527396[_0x58c02f(0x9c)](_0x1edd5e);});})['catch'](_0x5da618=>{const _0x21c06c=_0x3bedeb;console[_0x21c06c(0xaa)](_0x21c06c(0x94),_0x5da618),_0x527396[_0x21c06c(0xd5)]=_0x21c06c(0xc7);});}function _0x1ff72f(){const _0x116be7=_0x4303ae;fetch(API_BASE+_0x116be7(0xcd))['then'](_0x4267d9=>_0x4267d9['json']())['then'](_0x2ac9e8=>{_0x109c30=_0x2ac9e8,_0x3b7187();})['catch'](_0x542da8=>console[_0x116be7(0xaa)]('Error\x20al\x20cargar\x20productos\x20disponibles:',_0x542da8));}function _0x3b7187(){const _0x55eaec=_0x4303ae,_0x34edec=document[_0x55eaec(0xb7)](_0x55eaec(0xbf));_0x34edec['forEach'](_0x26b805=>{const _0x5a0aaa=_0x55eaec;_0x26b805[_0x5a0aaa(0xd5)]='<option\x20value=\x22\x22>Seleccione\x20un\x20producto\x20disponible</option>',_0x109c30['forEach'](_0xb7a5be=>{const _0x200a51=_0x5a0aaa;if(_0xb7a5be[_0x200a51(0xd2)]>0x0){const _0x362080=document['createElement'](_0x200a51(0xe0));_0x362080['value']=_0xb7a5be['id'],_0x362080[_0x200a51(0xa6)]=_0xb7a5be[_0x200a51(0x9f)]+_0x200a51(0x91)+_0xb7a5be[_0x200a51(0xd4)][_0x200a51(0xa3)](0x2)+'\x20('+_0xb7a5be[_0x200a51(0xd2)]+_0x200a51(0xa9),_0x362080[_0x200a51(0x93)]['precio']=_0xb7a5be[_0x200a51(0xd4)],_0x362080[_0x200a51(0x93)][_0x200a51(0xcc)]=_0xb7a5be[_0x200a51(0xd2)],_0x26b805['appendChild'](_0x362080);}});});}function _0x4b819f(){const _0x57dfe1=_0x4303ae;_0x33d6c3++;const _0x5638fe=document['createElement'](_0x57dfe1(0xcb));_0x5638fe[_0x57dfe1(0xba)]='producto',_0x5638fe['innerHTML']=_0x57dfe1(0x99),_0x50a46d['appendChild'](_0x5638fe);const _0x223f2c=_0x5638fe['querySelector'](_0x57dfe1(0xbf)),_0x6dd585=_0x5638fe[_0x57dfe1(0x83)]('.cantidad'),_0x591065=_0x5638fe[_0x57dfe1(0x83)](_0x57dfe1(0xc4)),_0x3f3278=_0x5638fe['querySelector']('.subtotal'),_0x5c5535=_0x5638fe[_0x57dfe1(0x83)](_0x57dfe1(0xb6));_0x3b7187(),_0x223f2c[_0x57dfe1(0x96)](_0x57dfe1(0xc2),_0x4f82cb),_0x6dd585[_0x57dfe1(0x96)](_0x57dfe1(0x81),_0x4f82cb);function _0x4f82cb(){const _0x502753=_0x57dfe1,_0x2e7be9=_0x223f2c[_0x502753(0x9d)][_0x223f2c['selectedIndex']];if(_0x2e7be9&&_0x2e7be9['dataset'][_0x502753(0xd4)]){const _0x522abe=parseFloat(_0x2e7be9['dataset'][_0x502753(0xd4)]),_0x2ede0f=parseInt(_0x2e7be9['dataset']['stock']);let _0x5bee8d=parseInt(_0x6dd585[_0x502753(0xc3)])||0x0;_0x5bee8d>_0x2ede0f&&(alert('No\x20hay\x20suficiente\x20stock.\x20Stock\x20disponible:\x20'+_0x2ede0f),_0x5bee8d=_0x2ede0f,_0x6dd585[_0x502753(0xc3)]=_0x2ede0f);_0x591065[_0x502753(0xc3)]=_0x522abe[_0x502753(0xa3)](0x2);const _0x1dd128=_0x522abe*_0x5bee8d;_0x3f3278['value']=_0x1dd128[_0x502753(0xa3)](0x2),_0x12b514();}else _0x591065['value']='',_0x3f3278[_0x502753(0xc3)]='';}_0x5c5535[_0x57dfe1(0x96)](_0x57dfe1(0xab),()=>{const _0x3eab79=_0x57dfe1;_0x50a46d[_0x3eab79(0x87)](_0x5638fe),_0x12b514();});}function _0x12b514(){const _0x26c0c7=_0x4303ae,_0x28ca38=document[_0x26c0c7(0xb7)]('.subtotal'),_0x4b6bca=Array[_0x26c0c7(0xa4)](_0x28ca38)[_0x26c0c7(0x97)]((_0x57290d,_0x19815a)=>{const _0x3ccf92=_0x26c0c7;return _0x57290d+(parseFloat(_0x19815a[_0x3ccf92(0xc3)])||0x0);},0x0);_0x386122[_0x26c0c7(0xc3)]=_0x4b6bca[_0x26c0c7(0xa3)](0x2);}_0x173e40[_0x4303ae(0x96)](_0x4303ae(0xab),_0x4b819f),_0x3ff764[_0x4303ae(0x96)](_0x4303ae(0x84),function(_0x1ccb9b){const _0x50f831=_0x4303ae;_0x1ccb9b['preventDefault']();const _0x37ea87=document[_0x50f831(0xc5)](_0x50f831(0x9b))[_0x50f831(0xc3)],_0x157457=Array[_0x50f831(0xa4)](_0x50a46d['children'])[_0x50f831(0xda)](_0x1c8945=>({'idProducto':_0x1c8945[_0x50f831(0x83)]('.id-producto')['value'],'cantidad':_0x1c8945[_0x50f831(0x83)](_0x50f831(0xb5))[_0x50f831(0xc3)],'subtotal':_0x1c8945[_0x50f831(0x83)](_0x50f831(0x8c))[_0x50f831(0xc3)]}));Promise[_0x50f831(0xb3)](_0x157457[_0x50f831(0xda)](_0x57b94c=>{const _0x1c578b=_0x50f831;return fetch(API_BASE+_0x1c578b(0x8f),{'method':_0x1c578b(0xbd),'headers':{'Content-Type':_0x1c578b(0xa1)},'body':JSON[_0x1c578b(0xdc)]({'venta':{'id':parseInt(_0x37ea87)},'producto':{'id':parseInt(_0x57b94c[_0x1c578b(0xc0)])},'cantidad':parseInt(_0x57b94c['cantidad']),'subtotal':parseFloat(_0x57b94c['subtotal'])})});}))[_0x50f831(0xaf)](()=>{const _0x3b014e=_0x50f831;_0x3789f7(),_0x3ff764['reset'](),_0x50a46d[_0x3b014e(0xd5)]='',_0x386122[_0x3b014e(0xc3)]=_0x3b014e(0xd8),_0x1ff72f();})[_0x50f831(0x95)](_0x2b1647=>{const _0xafe64e=_0x50f831;console['error'](_0xafe64e(0x9e),_0x2b1647),alert(_0x2b1647['message']);});}),_0x4acb01['addEventListener'](_0x4303ae(0x84),function(_0x3a7a95){const _0x3e3f97=_0x4303ae;_0x3a7a95['preventDefault']();const _0x3f28bc=document[_0x3e3f97(0xc5)](_0x3e3f97(0x86))['value'],_0xaad59c=document['getElementById'](_0x3e3f97(0xc6))['value'],_0x2bddfe=document[_0x3e3f97(0xc5)](_0x3e3f97(0xac))[_0x3e3f97(0xc3)],_0xb760da=document[_0x3e3f97(0xc5)](_0x3e3f97(0xa5))[_0x3e3f97(0xc3)],_0x22486a=document['getElementById'](_0x3e3f97(0xa8))[_0x3e3f97(0xc3)];fetch(API_BASE+_0x3e3f97(0xad)+_0x3f28bc,{'method':'PUT','headers':{'Content-Type':_0x3e3f97(0xa1)},'body':JSON[_0x3e3f97(0xdc)]({'venta':{'id':parseInt(_0xaad59c)},'producto':{'id':parseInt(_0x2bddfe)},'cantidad':parseInt(_0xb760da),'subtotal':parseFloat(_0x22486a)})})[_0x3e3f97(0xaf)](_0x798d4f=>{const _0x239d7f=_0x3e3f97;if(!_0x798d4f['ok'])throw new Error(_0x239d7f(0xb9));return _0x798d4f[_0x239d7f(0xd6)]();})[_0x3e3f97(0xaf)](()=>{const _0x443025=_0x3e3f97;_0x3789f7(),_0x4acb01[_0x443025(0xd3)](),_0x1ff72f();})[_0x3e3f97(0x95)](_0x154871=>{const _0x44f103=_0x3e3f97;console[_0x44f103(0xaa)](_0x44f103(0x8e),_0x154871),alert(_0x154871['message']);});}),_0x33616e[_0x4303ae(0x96)]('submit',function(_0x1f3dca){const _0x4b902b=_0x4303ae;_0x1f3dca['preventDefault']();const _0x4fc02=document[_0x4b902b(0xc5)](_0x4b902b(0x92))[_0x4b902b(0xc3)];fetch(API_BASE+_0x4b902b(0xad)+_0x4fc02,{'method':_0x4b902b(0xb2)})['then'](_0x4cb688=>{const _0x4a51b9=_0x4b902b;if(!_0x4cb688['ok'])throw new Error(_0x4a51b9(0xb9));_0x3789f7(),_0x33616e[_0x4a51b9(0xd3)](),_0x1ff72f();})['catch'](_0x13c9bd=>{const _0x5b6cf7=_0x4b902b;console[_0x5b6cf7(0xaa)](_0x5b6cf7(0xd9),_0x13c9bd),alert(_0x13c9bd[_0x5b6cf7(0x85)]);});}),_0x3789f7(),_0x1ff72f();});function _0x4b4d(_0x5abf1c,_0x299ce9){const _0x15b5b=_0x15b5();return _0x4b4d=function(_0x4b4df7,_0x36e14c){_0x4b4df7=_0x4b4df7-0x81;let _0x2b2f9f=_0x15b5b[_0x4b4df7];return _0x2b2f9f;},_0x4b4d(_0x5abf1c,_0x299ce9);}function _0x15b5(){const _0x2c0361=['222YQLtWy','.cantidad','.eliminar-producto','querySelectorAll','1453635CxpEPG','Detalle\x20de\x20venta\x20no\x20encontrado','className','No\x20hay\x20detalles\x20de\x20venta\x20disponibles.','6068168PNzYlA','POST','venta','.id-producto','idProducto',',\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Cantidad:\x20','change','value','.precio','getElementById','id-venta-modificar','<li\x20class=\x22list-group-item\x20bg-dark\x20text-white\x20text-danger\x22>Error\x20al\x20cargar\x20detalles\x20de\x20venta.\x20Por\x20favor,\x20intente\x20de\x20nuevo\x20m√°s\x20tarde.</li>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','N/A','2290AsMtNs','div','stock','/api/productos','DOMContentLoaded','subtotal-total','productos-container','subtotal','cantidad','reset','precio','innerHTML','json','48568597ePZFOY','0.00','Error\x20al\x20eliminar\x20detalle\x20de\x20venta:','map',',\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Subtotal:\x20$','stringify','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ID:\x20','156uwHfQx','option','input','producto','querySelector','submit','message','id-detalle-venta-modificar','removeChild','100CpPTlT','modificar-detalle-venta-form','165267IlrSxJ',',\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Producto:\x20','.subtotal','52551MQrUQv','Error\x20al\x20modificar\x20detalle\x20de\x20venta:','/api/detalles_venta','forEach','\x20-\x20$','id-detalle-venta-eliminar','dataset','Error\x20al\x20cargar\x20detalles\x20de\x20venta:','catch','addEventListener','reduce','eliminar-detalle-venta-form','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20class=\x22id-producto\x20form-select\x20mb-2\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22\x22>Seleccione\x20un\x20producto\x20disponible</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20class=\x22cantidad\x20form-control\x20mb-2\x22\x20placeholder=\x22Cantidad\x22\x20required\x20min=\x221\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20class=\x22precio\x20form-control\x20mb-2\x22\x20placeholder=\x22Precio\x20unitario\x22\x20readonly>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20class=\x22subtotal\x20form-control\x20mb-2\x22\x20placeholder=\x22Subtotal\x22\x20readonly>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22eliminar-producto\x20btn\x20btn-danger\x20mb-3\x22>Eliminar</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<span\x20class=\x22text-danger\x22>(Producto\x20no\x20encontrado)</span>','id-venta','appendChild','options','Error\x20al\x20crear\x20detalle\x20de\x20venta:','nombre','detalles-venta-lista','application/json','crear-detalle-venta-form','toFixed','from','cantidad-modificar','textContent','74333ZyFWxc','subtotal-modificar','\x20disponibles)','error','click','id-producto-modificar','/api/detalles_venta/','length','then','createElement','7173dApkop','DELETE','all'];_0x15b5=function(){return _0x2c0361;};return _0x15b5();}